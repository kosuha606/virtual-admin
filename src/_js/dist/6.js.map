{"version":3,"sources":["webpack:///./src/ui/DetailField.vue?763f","webpack:///./src/ui/DetailField.vue?050a","webpack:///src/ui/DetailField.vue","webpack:///./src/ui/DetailField.vue","webpack:///src/ui/Detail.vue","webpack:///./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///./src/ui/Detail.vue?569a","webpack:///./src/ui/Detail.vue?eb94","webpack:///./src/ui/Detail.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","tag","attrs","field","props","label","additionalValues","on","onAdditionalChange","model","value","callback","$$v","$set","expression","normalizeComponent","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","options","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","beforeCreate","concat","exports","detailConfig","noback","_e","back","_v","class","isSuccess","isError","domProps","_s","alertMessage","notabs","_m","additionalComponents","item","id","_l","tabLink","tab","_t","index","key","formData","additionalIndex","type","dataComponent","dataIndex","isViewOnly","$event","deleteAdditionalData","inDataComponent","ref","refInFor","staticStyle","addAdditionalData","initialConfig","nobuttons","save","apply","deleteItem"],"mappings":"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","file":"6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"virtual-form-row\"},[_c(_vm.component.component,{tag:\"component\",attrs:{\"field\":_vm.component.field,\"props\":_vm.component.props,\"label\":_vm.component.label,\"additional-values\":_vm.component.additionalValues},on:{\"additionalchange\":_vm.onAdditionalChange},model:{value:(_vm.component.value),callback:function ($$v) {_vm.$set(_vm.component, \"value\", $$v)},expression:\"component.value\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailField.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"virtual-form-row\">\n        <component\n                :is=\"component.component\"\n                :field=\"component.field\"\n                :props=\"component.props\"\n                :label=\"component.label\"\n                v-model=\"component.value\"\n                :additional-values=\"component.additionalValues\"\n                @additionalchange=\"onAdditionalChange\"\n        ></component>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"DetailField\",\n        props: ['component'],\n        methods: {\n            onAdditionalChange(value) {\n                this.component.additionalValues = value;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>","import { render, staticRenderFns } from \"./DetailField.vue?vue&type=template&id=3b7edfbc&scoped=true&\"\nimport script from \"./DetailField.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailField.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b7edfbc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div>\n        <div v-if=\"!detailConfig.noback\">\n            <button @click=\"back\" class=\"btn btn-default\">\n                <i class=\"fa fa-arrow-left\"></i>\n                Назад\n            </button>\n        </div>\n\n        <hr>\n\n        <div v-if=\"alertMessage\" :class=\"{'alert': 1, 'alert-success': isSuccess, 'alert-danger': isError}\">\n            <div v-html=\"alertMessage\"></div>\n        </div>\n\n\n        <ul v-if=\"!detailConfig.notabs\" class=\"nav nav-tabs\">\n            <li class=\"nav-item active\">\n                <a class=\"nav-link active\" data-toggle=\"tab\" href=\"#description\">Основное</a>\n            </li>\n            <template v-if=\"additionalComponents && item.id\">\n                <li v-for=\"component in additionalComponents\" class=\"nav-item\">\n                    <a class=\"nav-link\" data-toggle=\"tab\" :href=\"'#'+component.tabLink\">{{ component.tab }}</a>\n                </li>\n            </template>\n        </ul>\n\n        <div class=\"tab-content\">\n            <p>&nbsp;</p>\n\n            <div class=\"tab-pane fade active show\" id=\"description\">\n                <div class=\"form\">\n                    <slot v-bind:default=\"formData\">\n                        <template v-for=\"(component, index) in formData\">\n                            <div>\n                                <detail-field\n                                        :key=\"'main_data_field'+index\"\n                                        :component=\"component\"\n                                >\n                                </detail-field>\n                            </div>\n                        </template>\n                    </slot>\n                </div>\n            </div>\n\n\n            <template v-if=\"additionalComponents && item.id\">\n                <div v-for=\"(component, additionalIndex) in additionalComponents\" class=\"tab-pane fade\" :id=\"component.tabLink\">\n                    <div v-if=\"component.type !== 'one.to.one'\">\n\n                        <div v-for=\"(dataComponent, dataIndex) in component.dataConfig\">\n                            <button v-if=\"!component.isViewOnly\" @click=\"deleteAdditionalData(additionalIndex, dataIndex)\" type=\"button\" class=\"btn btn-danger\">Удалить</button>\n                            <template v-for=\"(inDataComponent, index) in dataComponent\">\n                                <div>\n                                    <detail-field\n                                            :data-index=\"dataIndex\"\n                                            :index=\"index\"\n                                            :ref=\"'detail_field_'+inDataComponent.field+'_'+index+'_'+dataIndex\"\n                                            :key=\"'data_component'+index\"\n                                            :component=\"inDataComponent\"\n                                    >\n                                    </detail-field>\n                                </div>\n                            </template>\n                            <hr>\n                        </div>\n                        <button v-if=\"!component.isViewOnly\" @click=\"addAdditionalData(additionalIndex, component.initialConfig)\" type=\"button\" class=\"btn btn-primary\" style=\"margin-top: 10px;\">Добавить</button>\n\n                    </div>\n                    <div v-else>\n                        <div v-for=\"dataComponent in component.dataConfig\">\n                            <template v-for=\"(inDataComponent, index) in dataComponent\">\n                                <div>\n                                    <detail-field\n                                            :key=\"'data_component'+index\"\n                                            :component=\"inDataComponent\"\n                                    >\n                                    </detail-field>\n                                </div>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            </template>\n        </div>\n\n        <p>&nbsp;</p>\n\n        <div v-if=\"!detailConfig.nobuttons\">\n            <button @click=\"save\" class=\"btn btn-success\">\n                <i class=\"fa fa-save\"></i>\n                Сохранить\n            </button>\n            <button @click=\"apply\" class=\"btn btn-primary\">\n                Применить\n            </button>\n            <button v-if=\"this.id\" @click=\"deleteItem\" class=\"btn btn-danger\">\n                Удалить\n            </button>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import {clone, cloneDeep, each} from 'lodash';\n    import DetailField from './DetailField';\n\n    export default {\n        name: \"Detail\",\n        props: {\n            id: [String, Number],\n            defaultFormData: Object,\n            detailConfig: Object,\n            saveUrl: String,\n            detailComponents: Array,\n            additionalComponents: Array,\n            component: this,\n            item: Object\n        },\n        components: {\n            DetailField,\n        },\n        created() {\n            each(this.detailComponents, (element) => {\n                this.formData[element.field] = element;\n            });\n            this.$forceUpdate();\n        },\n        mounted() {\n            $(document).ready(() => {\n                let hash = window.location.hash;\n\n                if (hash) {\n                    hash = hash.replace('-tab', '');\n                    $('[href=\"'+hash+'\"]').trigger('click');\n                }\n\n                $('.nav-tabs a').on('shown.bs.tab', function (e) {\n                    window.location.hash = e.target.hash+'-tab';\n                })\n            });\n        },\n        computed: {\n            componentsIndex() {\n                let result = {};\n                each(this.detailComponents, (item) => {\n                    result[item.field] = item;\n                });\n\n                return result;\n            },\n            listUrl() {\n                return this.saveUrl.replace('detail', 'list');\n            },\n            deleteUrl() {\n                return this.saveUrl.replace('detail', 'delete');\n            }\n        },\n        data() {\n            return {\n                isSuccess: false,\n                isError: false,\n                alertMessage: '',\n                formData: {}\n            }\n        },\n        methods: {\n            checkInput() {\n                console.log('input');\n            },\n            back() {\n                location.href=this.listUrl+'?list=on';\n            },\n            save() {\n                this.uploadToServer(() => {\n                    this.back();\n                });\n            },\n            apply() {\n                this.uploadToServer();\n            },\n            processError(errors) {\n                let message = '';\n                each(errors, (error) => {\n                    message += error+\"<br>\";\n                });\n                this.alert(message, 'error');\n                $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\n            },\n            deleteItem() {\n                if (!confirm('Вы уверены?')) {\n                    return;\n                }\n\n                this.$root.startProgress();\n                $.ajax({\n                    method: 'POST',\n                    url: this.saveUrl,\n                    data: {\n                        id: this.id,\n                        delete: true\n                    }\n                }).done((response) => {\n                    if (response.result) {\n                        this.back();\n                    } else {\n                        this.alert('Ошибка удаления', 'error');\n                    }\n                    this.$root.stopProgress();\n                }).fail(() => {\n\n                    this.$root.stopProgress();\n                });\n            },\n            alert(message, type) {\n                this.isError = false;\n                this.isSuccess = false;\n\n                if (type === 'success') {\n                    this.isSuccess = true;\n                } else {\n                    this.isError = true;\n                }\n\n                this.alertMessage = message;\n                this.$forceUpdate();\n            },\n            addAdditionalData(additionalIndex, data) {\n                this.additionalComponents[additionalIndex]['dataConfig'].push(cloneDeep(data));\n                this.$forceUpdate();\n            },\n            deleteAdditionalData(additionalIndex, dataIndex) {\n                this.additionalComponents[additionalIndex]['dataConfig'].splice(dataIndex, 1);\n                this.$forceUpdate();\n            },\n            appendAdditionalData(serverData) {\n                var additionalServerData = {};\n\n                each(this.additionalComponents, (item) => {\n                    if (item.isViewOnly) {\n                        return;\n                    }\n\n                    if (!additionalServerData[item.relationClass]) {\n                        additionalServerData[item.relationClass] = [];\n                    }\n\n                    each(item.dataConfig, (dataItem) => {\n                        var serverItem = {};\n\n                        each(dataItem, (fieldItem) => {\n                            serverItem[fieldItem.field] = fieldItem.value;\n                        });\n\n                        additionalServerData[item.relationClass].push(serverItem);\n                    });\n                });\n\n                serverData.secondary_form = additionalServerData;\n\n                return serverData;\n            },\n            appendAdditionalDataFromReqularComponents(formData, serverData)\n            {\n                each(formData, (item) => {\n                    if (!item.additionalValues) {\n                        return;\n                    }\n\n                    if (!serverData.secondary_form) {\n                        return;\n                    }\n\n                    if (!serverData.secondary_form[item.additionalValues.relationClass]) {\n                        serverData.secondary_form[item.additionalValues.relationClass] = [];\n                    }\n\n                    each(item.additionalValues.items, (dataItem) => {\n                        var serverItem = {};\n\n                        each(dataItem, (fieldItem) => {\n                            serverItem[fieldItem.field] = fieldItem.value;\n                        });\n\n                        serverData.secondary_form[item.additionalValues.relationClass].push(serverItem);\n                    });\n                });\n\n                return serverData;\n            },\n            uploadToServer(afterSuccess) {\n                this.$root.startProgress();\n                var serverData = {};\n                if (this.id) {\n                    serverData.id = this.id;\n                }\n                each(this.formData, (item) => {\n                    serverData[item.field] = item.value;\n                });\n                each(this.defaultFormData, (item, fieldName) => {\n                    serverData[fieldName] = item\n                });\n\n                if (this.item.id) {\n                    serverData = this.appendAdditionalData(serverData);\n                }\n\n                serverData = this.appendAdditionalDataFromReqularComponents(this.formData, serverData);\n                if (this.additionalComponents) {\n                    each(this.additionalComponents, (additionalComponentItems) => {\n                        each(additionalComponentItems.dataConfig, (additionalComponentItem) => {\n                            serverData = this.appendAdditionalDataFromReqularComponents(additionalComponentItem, serverData);\n                        });\n                    });\n                }\n\n                $.ajax({\n                    method: 'POST',\n                    url: this.saveUrl,\n                    data: serverData\n                }).done((response) => {\n                    if (!response.result) {\n                        this.processError(response.errors);\n                    } else {\n                        if (afterSuccess) {\n                            afterSuccess();\n                        } else {\n                            let url = this.saveUrl + '?id='+response.model.id;\n                            if (location.hash) {\n                                url = url + '#' + location.hash;\n                            }\n                            location.reload();\n                        }\n                    }\n                    this.$root.stopProgress();\n                }).fail(() => {\n\n                    this.$root.stopProgress();\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.detailConfig.noback)?_c('div',[_c('button',{staticClass:\"btn btn-default\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"fa fa-arrow-left\"}),_vm._v(\"\\n            Назад\\n        \")])]):_vm._e(),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),(_vm.alertMessage)?_c('div',{class:{'alert': 1, 'alert-success': _vm.isSuccess, 'alert-danger': _vm.isError}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.alertMessage)}})]):_vm._e(),_vm._v(\" \"),(!_vm.detailConfig.notabs)?_c('ul',{staticClass:\"nav nav-tabs\"},[_vm._m(0),_vm._v(\" \"),(_vm.additionalComponents && _vm.item.id)?_vm._l((_vm.additionalComponents),function(component){return _c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",attrs:{\"data-toggle\":\"tab\",\"href\":'#'+component.tabLink}},[_vm._v(_vm._s(component.tab))])])}):_vm._e()],2):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tab-content\"},[_c('p',[_vm._v(\" \")]),_vm._v(\" \"),_c('div',{staticClass:\"tab-pane fade active show\",attrs:{\"id\":\"description\"}},[_c('div',{staticClass:\"form\"},[_vm._t(\"default\",[_vm._l((_vm.formData),function(component,index){return [_c('div',[_c('detail-field',{key:'main_data_field'+index,attrs:{\"component\":component}})],1)]})],{\"default\":_vm.formData})],2)]),_vm._v(\" \"),(_vm.additionalComponents && _vm.item.id)?_vm._l((_vm.additionalComponents),function(component,additionalIndex){return _c('div',{staticClass:\"tab-pane fade\",attrs:{\"id\":component.tabLink}},[(component.type !== 'one.to.one')?_c('div',[_vm._l((component.dataConfig),function(dataComponent,dataIndex){return _c('div',[(!component.isViewOnly)?_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteAdditionalData(additionalIndex, dataIndex)}}},[_vm._v(\"Удалить\")]):_vm._e(),_vm._v(\" \"),_vm._l((dataComponent),function(inDataComponent,index){return [_c('div',[_c('detail-field',{key:'data_component'+index,ref:'detail_field_'+inDataComponent.field+'_'+index+'_'+dataIndex,refInFor:true,attrs:{\"data-index\":dataIndex,\"index\":index,\"component\":inDataComponent}})],1)]}),_vm._v(\" \"),_c('hr')],2)}),_vm._v(\" \"),(!component.isViewOnly)?_c('button',{staticClass:\"btn btn-primary\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addAdditionalData(additionalIndex, component.initialConfig)}}},[_vm._v(\"Добавить\")]):_vm._e()],2):_c('div',_vm._l((component.dataConfig),function(dataComponent){return _c('div',[_vm._l((dataComponent),function(inDataComponent,index){return [_c('div',[_c('detail-field',{key:'data_component'+index,attrs:{\"component\":inDataComponent}})],1)]})],2)}),0)])}):_vm._e()],2),_vm._v(\" \"),_c('p',[_vm._v(\" \")]),_vm._v(\" \"),(!_vm.detailConfig.nobuttons)?_c('div',[_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.save}},[_c('i',{staticClass:\"fa fa-save\"}),_vm._v(\"\\n            Сохранить\\n        \")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.apply}},[_vm._v(\"\\n            Применить\\n        \")]),_vm._v(\" \"),(this.id)?_c('button',{staticClass:\"btn btn-danger\",on:{\"click\":_vm.deleteItem}},[_vm._v(\"\\n            Удалить\\n        \")]):_vm._e()]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"nav-item active\"},[_c('a',{staticClass:\"nav-link active\",attrs:{\"data-toggle\":\"tab\",\"href\":\"#description\"}},[_vm._v(\"Основное\")])])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=7b31b052&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b31b052\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}