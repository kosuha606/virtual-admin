{"version":3,"sources":["webpack:///./src/ui/List.vue?cc6a","webpack:///./src/ui/List.vue?f2ff","webpack:///./src/ui/List.vue","webpack:///src/ui/List.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","ref","attrs","defaultSort","id","fetchData","vueTableFields","filterComponents","massOperationComponents","scopedSlots","_u","key","fn","$refs","mainList","pagination","on","$event","nextPage","_v","staticClass","gotoBegin","prevPage","_l","helpers","range","pagesCount","page","class","gotoPage","_s","gotoEnd","directives","name","rawName","value","expression","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","_value","$set","multiple","variant","domProps","itemsPerPage","_e","proxy","field","label","tag","props","model","filters","callback","$$v","resetFilter"],"mappings":"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","file":"8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vue-table',{ref:\"mainList\",attrs:{\"default-sort\":_vm.defaultSort,\"id\":_vm.id,\"sync-url\":_vm.fetchData,\"cell-components\":_vm.vueTableFields,\"filter-components\":_vm.filterComponents,\"mass-operation-components\":_vm.massOperationComponents},scopedSlots:_vm._u([{key:\"pagination_top\",fn:function(){return [(_vm.$refs && _vm.$refs.mainList)?_c('div',[(_vm.$refs.mainList.pagination.appendMode)?_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$refs.mainList.pagination.nextPage()}}},[_vm._v(\"\\n                    Показать еще\\n                \")]):_c('div',{staticClass:\"pagination-wrapper row\"},[_c('div',{staticClass:\"col-md-10\"},[_c('ul',{staticClass:\"pagination\"},[_c('li',{staticClass:\"pagination-item\"},[_c('button',{staticClass:\"btn btn-default\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$refs.mainList.pagination.gotoBegin()}}},[_vm._v(\"В начало\")])]),_vm._v(\" \"),_c('li',{staticClass:\"pagination-item\"},[_c('button',{staticClass:\"btn btn-default\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$refs.mainList.pagination.prevPage()}}},[_vm._v(\"Назад\")])]),_vm._v(\" \"),_vm._l((_vm.$refs.mainList.helpers.range(1, _vm.$refs.mainList.pagination.pagesCount())),function(page){return _c('li',{class:{'pagination-item':1, 'pagination-item__active': _vm.$refs.mainList.page == _vm.$refs.mainList.pagination.page}},[_c('button',{staticClass:\"btn btn-default\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$refs.mainList.pagination.gotoPage(page)}}},[_vm._v(\"\\n                                    \"+_vm._s(page)+\"\\n                                \")])])}),_vm._v(\" \"),_c('li',{staticClass:\"pagination-item\"},[_c('button',{staticClass:\"btn btn-default\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$refs.mainList.pagination.nextPage()}}},[_vm._v(\"Вперед\")])]),_vm._v(\" \"),_c('li',{staticClass:\"pagination-item\"},[_c('button',{staticClass:\"btn btn-default\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$refs.mainList.pagination.gotoEnd()}}},[_vm._v(\"В конец\")])])],2)]),_vm._v(\" \"),_c('div',{staticClass:\"items-per-page col-md-2\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.$refs.mainList.pagination.itemsPerPage),expression:\"$refs.mainList.pagination.itemsPerPage\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.$refs.mainList.pagination, \"itemsPerPage\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.$refs.mainList.pagination.itemsPerPageVariants),function(variant){return _c('option',{domProps:{\"selected\":variant==_vm.$refs.mainList.pagination.itemsPerPage,\"value\":variant}},[_vm._v(\"\\n                                \"+_vm._s(variant)+\"\\n                            \")])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"})])]):_vm._e()]},proxy:true},{key:\"filter\",fn:function(){return [(_vm.$refs && _vm.$refs.mainList)?_c('div',{staticClass:\"vue-table-filter\"},[_c('div',{staticClass:\"row\"},_vm._l((_vm.$refs.mainList.filterComponents),function(component){return _c('div',{staticClass:\"col-md-4\"},[_c(component.component,{key:'mass_'+component.field+component.label,tag:\"component\",attrs:{\"name\":component.field,\"label\":component.label,\"props\":component.props},model:{value:(_vm.$refs.mainList.filters[component.field]),callback:function ($$v) {_vm.$set(_vm.$refs.mainList.filters, component.field, $$v)},expression:\"$refs.mainList.filters[component.field]\"}})],1)}),0),_vm._v(\" \"),_c('div',{staticClass:\"vue-table-filter-reset mt-10\"},[(_vm.$refs.mainList.filterComponents.length)?_c('button',{staticClass:\"btn btn-default\",on:{\"click\":_vm.$refs.mainList.resetFilter}},[_vm._v(\"\\n                        Сбросить\\n                    \")]):_vm._e()])]):_vm._e()]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--4-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=59facc1f&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59facc1f\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div>\n        <vue-table\n                :default-sort=\"defaultSort\"\n                :id=\"id\"\n                ref=\"mainList\"\n                :sync-url=\"fetchData\"\n                :cell-components=\"vueTableFields\"\n                :filter-components=\"filterComponents\"\n                :mass-operation-components=\"massOperationComponents\"\n        >\n            <template v-slot:pagination_top>\n                <div v-if=\"$refs && $refs.mainList\">\n                    <button v-if=\"$refs.mainList.pagination.appendMode\" @click=\"$refs.mainList.pagination.nextPage()\" type=\"button\">\n                        Показать еще\n                    </button>\n                    <div v-else class=\"pagination-wrapper row\">\n                        <div class=\"col-md-10\">\n                            <ul class=\"pagination\">\n                                <li class=\"pagination-item\">\n                                    <button class=\"btn btn-default\" @click=\"$refs.mainList.pagination.gotoBegin()\" type=\"button\">В начало</button>\n                                </li>\n                                <li class=\"pagination-item\">\n                                    <button class=\"btn btn-default\" @click=\"$refs.mainList.pagination.prevPage()\" type=\"button\">Назад</button>\n                                </li>\n                                <li :class=\"{'pagination-item':1, 'pagination-item__active': $refs.mainList.page == $refs.mainList.pagination.page}\" v-for=\"page in $refs.mainList.helpers.range(1, $refs.mainList.pagination.pagesCount())\">\n                                    <button class=\"btn btn-default\" @click=\"$refs.mainList.pagination.gotoPage(page)\" type=\"button\">\n                                        {{ page }}\n                                    </button>\n                                </li>\n                                <li class=\"pagination-item\">\n                                    <button class=\"btn btn-default\" @click=\"$refs.mainList.pagination.nextPage()\" type=\"button\">Вперед</button>\n                                </li>\n                                <li class=\"pagination-item\">\n                                    <button class=\"btn btn-default\" @click=\"$refs.mainList.pagination.gotoEnd()\" type=\"button\">В конец</button>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class=\"items-per-page col-md-2\">\n                            <select class=\"form-control\" v-model=\"$refs.mainList.pagination.itemsPerPage\">\n                                <option\n                                        :selected=\"variant==$refs.mainList.pagination.itemsPerPage\"\n                                        v-for=\"variant in $refs.mainList.pagination.itemsPerPageVariants\"\n                                        :value=\"variant\">\n                                    {{ variant }}\n                                </option>\n                            </select>\n                        </div>\n                        <div class=\"clearfix\"></div>\n                    </div>\n                </div>\n            </template>\n            <template v-slot:filter>\n                <div class=\"vue-table-filter\" v-if=\"$refs && $refs.mainList\">\n                    <div class=\"row\">\n                        <div class=\"col-md-4\"\n                             v-for=\"component in $refs.mainList.filterComponents\"\n                        >\n                            <component\n                                    v-model=\"$refs.mainList.filters[component.field]\"\n                                    :key=\"'mass_'+component.field+component.label\"\n                                    :is=\"component.component\"\n                                    :name=\"component.field\"\n                                    :label=\"component.label\"\n                                    :props=\"component.props\"\n                            ></component>\n                        </div>\n                    </div>\n                    <div class=\"vue-table-filter-reset mt-10\">\n                        <button class=\"btn btn-default\" @click=\"$refs.mainList.resetFilter\" v-if=\"$refs.mainList.filterComponents.length\">\n                            Сбросить\n                        </button>\n                    </div>\n                </div>\n            </template>\n        </vue-table>\n    </div>\n</template>\n\n<script>\n    import {VueTable} from 'vue-component-table';\n\n    export default {\n        name: \"List\",\n        props: {\n            id: String,\n            entityUrl: String,\n            cellComponents: Array,\n            filterComponents: Array,\n            massOperationComponents: Array,\n            defaultSort: Object,\n        },\n        components: {\n            VueTable\n        },\n        computed: {\n            vueTableFields() {\n                var vm = this;\n                let result = [];\n                this.cellComponents.forEach(function(i) {\n                    var props = i.props ? i.props : {};\n                    if (i.props && i.props.link) {\n                        props.link = function(item) {\n                            return vm.entityUrl+'/detail?id='+item.id;\n                        };\n                    }\n\n                    if (i.props && i.props.url) {\n                        var url = i.props.url;\n                        props.url = function(item) {\n                            return url.toString().replace('%id%', item.id);\n                        };\n                    }\n\n                    result.push({\n                        component: i.component,\n                        field: i.field,\n                        label: i.label,\n                        props: props,\n                    })\n                });\n\n                return result;\n            }\n        },\n        methods: {\n            fetchData(success, requestData) {\n                var reqData = {};\n\n                if (requestData) {\n                    reqData = {};\n                    reqData.page = requestData.pagination.page;\n                    reqData.per_page = requestData.pagination.itemsPerPage;\n                    reqData.sortField = requestData.sort.field;\n                    reqData.sortDir = requestData.sort.direction;\n                    reqData.filter = requestData.filters;\n                }\n\n                this.$root.startProgress();\n                $.ajax({\n                    method: 'GET',\n                    url: this.entityUrl+'/list',\n                    data: reqData\n                }).done((response) => {\n                    if (success) {\n                        success({\n                            data: {\n                                items: response.models,\n                                total: response.pagination.totals\n                            }\n                        })\n                    }\n                    this.$root.stopProgress();\n                }).fail(() => {\n                    alert('server error');\n                    this.$root.stopProgress();\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}